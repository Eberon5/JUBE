<?xml version="1.0" encoding="UTF-8"?>
<jube>
  <parameterset name="compileset">
    <parameter name="make">gmake</parameter>
    <parameter name="arch">_LINUX</parameter>
    <parameter name="cc">bgxlc_r</parameter>
    <parameter name="cflags">-qtune=450 -qarch=450</parameter>  
    <parameter name="mpi_cc">mpixlc_r</parameter>  
    <parameter name="mpi_cxx">mpixlcxx_r</parameter>  
    <parameter name="mpi_f90">mpixlf90_r</parameter> 
    <parameter name="mpi_f77">mpixlf77_r</parameter>
  </parameterset>

  <parameterset name="libs">
    <parameter name="load_module">module load</parameter>
    <parameter name="load_sionlib">$load_module sionlib/1.5.2</parameter>
    <parameter name="sionconfig">sionconfig</parameter>
  </parameterset>

  <substituteset name="compilesub">
    <sub source="#CC#" dest="$cc" />
    <sub source="#ARCH#" dest="$arch" />
    <sub source="#MPI_CC#" dest="$mpi_cc" />
    <sub source="#CFLAGS#" dest="$cflags" />
  </substituteset> 

  <parameterset name="executeset">
    <parameter name="starter">runjob</parameter>
    <parameter name="submit">llsubmit</parameter>
    <parameter name="nodes" type="int">1</parameter>
    <parameter name="taskspernode" type="int">1</parameter>
    <parameter name="executable"></parameter>
    <parameter name="args_exec"></parameter>
    <parameter name="tasks" mode="python" type="int">$nodes * $taskspernode</parameter>
    <parameter name="mail"></parameter>	
    <parameter name="timelimit">00:30:00</parameter>
    <parameter name="submit_job_script">juqueenSubmit.job</parameter>
    <parameter name="marker_file">ready</parameter>
    <parameter name="notification">always</parameter>
    <parameter name="connectivity">torus</parameter>
  </parameterset>
  
  <substituteset name="executesub">
    <iofile in="${submit_job_script}.in" out="$submit_job_script" />
    <sub source="#ENV#" dest="" />
    <sub source="#NOTIFY_EMAIL#" dest="$mail" />
    <sub source="#BENCHNAME#" dest="$jube_benchmark_name" />
    <sub source="#BGSIZE#" dest="$nodes" />
    <sub source="#TIME_LIMIT#" dest="$timelimit" />
    <sub source="#PREPROCESS#" dest="" />
    <sub source="#POSTPROCESS#" dest="" />
    <sub source="#STARTER#" dest="$starter" />
    <sub source="#ARGS_STARTER#" dest="--np $tasks --ranks-per-node $taskspernode" />
    <sub source="#MEASUREMENT#" dest="" />
    <sub source="#STDOUTLOGFILE#" dest="stdout" />
    <sub source="#STDERRLOGFILE#" dest="stderr" />
    <sub source="#EXECUTABLE#" dest="$executable" />
    <sub source="#ARGS_EXECUTABLE#" dest="$args_exec" />
    <sub source="#MARKER_FILE#" dest="$marker_file" />
    <sub source="#NOTIFICATION#" dest="$notification" />
    <sub source="#BGCONNECTIVITY#" dest="$connectivity" />
  </substituteset>

  <fileset name="jobfiles">
    <copy>${submit_job_script}.in</copy>
  </fileset>
 
</jube>
