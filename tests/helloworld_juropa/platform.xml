<?xml version="1.0" encoding="UTF-8"?>
<jube>
  <parameterset name="compileset">
    <parameter name="cc">mpicc</parameter>
  </parameterset>
  <parameterset name="executeset">
    <parameter name="job_name">job.ll</parameter>
    <parameter name="submit">msub</parameter>
    <parameter name="ready_file">ready</parameter>
    <parameter name="run_statement">$submit $job_name</parameter>
    <parameter name="num_progs" mode="python" type="int">${nodes}*${ppn}</parameter>
    <parameter name="mail_mode">abe</parameter>
    <parameter name="err_file">err</parameter>
    <parameter name="out_file">out</parameter> 
    <parameter name="exec">mpiexec</parameter>
    <parameter name="exec_options">-np $num_progs</parameter>
  </parameterset>
  <substituteset name="sub_job">
    <iofile in="job.in" out="$job_name" />
    <sub source="#NODES#" dest="$nodes" />
    <sub source="#PROCS_PER_NODE#" dest="$ppn" />
    <sub source="#WALLTIME#" dest="$walltime" />
    <sub source="#ERROR_FILEPATH#" dest="$err_file" />
    <sub source="#OUT_FILEPATH#" dest="$out_file" />
    <sub source="#MAIL_ADDRESS#" dest="$mail_address" />
    <sub source="#MAIL_MODE#" dest="$mail_mode" />
    <sub source="#NUM_PROGS#" dest="$num_progs" />
    <sub source="#PROG_NAME#" dest="$prog_name" />
    <sub source="#EXEC#" dest="$exec" />
    <sub source="#EXEC_OPTIONS#" dest="$exec_options" />
    <sub source="#READY#" dest="$ready_file" />
  </substituteset>
  <fileset name="job_files">
    <copy>job.in</copy>
  </fileset>
</jube>

