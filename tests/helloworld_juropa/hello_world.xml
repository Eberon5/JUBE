<?xml version="1.0" encoding="UTF-8"?>
<jube>
  <benchmark name="hello_world" outpath="benchmark_runs">
    <parameterset name="programset">
      <parameter name="executable">helloworld</parameter>
    </parameterset>
    <parameterset name="compileset" init_with="platform.xml" />
    <parameterset name="executeset" init_with="platform.xml">
      <parameter name="nodes">1,2</parameter>
      <parameter name="ppn">2,4,8,16</parameter>
      <parameter name="walltime">00:00:30</parameter>
      <parameter name="mail_address">s.luehrs@fz-juelich.de</parameter>
      <parameter name="mail_mode">n</parameter>
      <parameter name="prog_name">$executable</parameter> 
   </parameterset>
    
    <fileset name="sources">
      <copy>hello_world.c</copy>
    </fileset>
    <fileset name="job_files" init_with="platform.xml">
      <link rel_path_ref="internal">compile/$prog_name</link>
    </fileset>
    <fileset name="show_files">
      <copy rel_path_ref="internal" name="result_${jube_benchmark_id}_${jube_wp_id}.out">execute/$out_file</copy>
    </fileset>
    
    <substituteset name="sub_job" init_with="platform.xml" />
    
    <step name="compile">
      <use>compileset</use>
      <use>programset</use>
      <use>sources</use>
      <do>$cc -o $executable hello_world.c</do>
    </step>
    <step name="execute" depend="compile">
      <use>job_files</use>
      <use>sub_job</use>
      <use>executeset</use>
      <use>programset</use>
      <do done_file="$ready_file">$run_statement</do>
      <do done_file="$out_file"></do>
    </step>
    <step name="show" depend="execute" work_dir="result">
      <use>show_files</use>
      <use>executeset</use>     
    </step>
  </benchmark>
</jube>

