<!--
    JuRoPA test suite
    JUBE benchmark configuration schema for: RayBen
-->

<bench name    = "RayBen" platform= "Intel-Nehalem-JuRoPA" >

<!-- ********************************************************** -->
<!-- Setup : Small (N1=193,N2=97,N3=129)                       -->
<!-- ********************************************************** -->

<benchmark name="small_pure_MPI" active="0">

    <compile     cname          = "$platform" 
                 version        = "new"
		 n1             = "$N1"
		 n2             = "$N2"
		 n3             = "$N3"/>

    <tasks       threadspertask = "1"
                 taskspernode   = "8"
                 nodes          = "12" />

    <params      descript       = "Setup: Small Pure MPI"
                 optflags       = "-openmp -r8 -O3 -axSSE4.2 -ipo -m64 -align rec8byte"
                 ldoptflags     = "-lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -liomp5"
                 N1             = "193"
                 N2             = "97"
                 N3             = "129"
                 NTST           = "10"
                 NSON           = "0"/>

    <prepare     cname          = "small" />

    <execution   cname          = "$platform"
                 ppn            = "8"
		 omp            = ""
                 walltime       = "00:30:00"
                 iteration      = "1" />

    <verify      cname          = "standard" />

    <analyse     cname          = "standard" />

</benchmark>

<!-- ********************************************************** -->

<!-- ********************************************************** -->
<!-- Setup : Medium (N1=721,N2=361,N3=621)                       -->
<!-- ********************************************************** -->
<benchmark name="medium_pure_MPI" active="0">

    <compile     cname          = "$platform" 
                 version        = "new"
		 n1             = "$N1"
		 n2             = "$N2"
		 n3             = "$N3"/>

    <tasks       threadspertask = "1"
                 taskspernode   = "8"
                 nodes          = "45" />

    <params      descript       = "Setup: Medium Pure MPI"
                 optflags       = "-openmp -r8 -O3 -axSSE4.1 -ipo -m64 -align rec8byte"
                 ldoptflags     = "-lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -liomp5"
                 N1             = "721"
                 N2             = "361"
                 N3             = "621"
                 NTST           = "10"
                 NSON           = "0"/>

    <prepare     cname          = "medium" />

    <execution   cname          = "$platform"
                 ppn            = "8"
		 omp            = ""
                 walltime       = "00:30:00"
                 iteration      = "1" />

    <verify      cname          = "standard" />

    <analyse     cname          = "standard" />

</benchmark>

<!-- ********************************************************** -->

<!-- ********************************************************** -->
<!-- Setup : Big (N1=1201,N2=513,N3=1025)                       -->
<!-- ********************************************************** -->
<benchmark name="big_pure_MPI" active="0">

    <compile     cname          = "$platform" 
                 version        = "new"
		 n1             = "$N1"
		 n2             = "$N2"
		 n3             = "$N3"/>

    <tasks       threadspertask = "1"
                 taskspernode   = "8"
                 nodes          = "64" />

    <params      descript       = "Setup: Big Pure MPI"
                 optflags       = "-openmp -r8 -O3 -axSSE4.1 -ipo -m64 -align rec8byte"
                 ldoptflags     = "-lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -liomp5"
                 N1             = "1201"
                 N2             = "513"
                 N3             = "1025"
                 NTST           = "10"
                 NSON           = "0"/>

    <prepare     cname          = "big" />

    <execution   cname          = "$platform"
                 ppn            = "8"
		 omp            = ""
                 walltime       = "00:30:00"
                 iteration      = "1" />

    <verify      cname          = "standard" />

    <analyse     cname          = "standard" />

</benchmark>

<!-- ********************************************************** -->

<!-- ********************************************************** -->
<!-- Setup : Small (N1=193,N2=97,N3=129) Hybrid                 -->
<!-- ********************************************************** -->

<benchmark name="small_Hybrid-tcheck" active="1">

    <compile     cname          = "$platform" 
                 version        = "new"
		 n1             = "$N1"
		 n2             = "$N2"
		 n3             = "$N3"/>

    <tasks       threadspertask = "8"
                 taskspernode   = "1"
                 nodes          = "1"/>

    <params      descript       = "Setup: Small Hybrid"
                 optflags       = "-g -pg -openmp -r8 -O3 -axSSE4.2 -ipo -m64 -align rec8byte"
                 ldoptflags     = "-g -pg -lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -liomp5"
                 N1             = "193"
                 N2             = "97"
                 N3             = "129"
                 NTST           = "10"
                 NSON           = "0"/>

    <prepare     cname          = "small" />

    <execution   cname          = "$platform"
                 ppn            = "8"
		 omp            = "--exports=OMP_NUM_THREADS"
                 walltime       = "00:30:00"
                 iteration      = "1" />

    <verify      cname          = "standard" />

    <analyse     cname          = "standard" />

</benchmark>

<!-- ********************************************************** -->
 
<!-- ********************************************************** -->
<!-- Setup : Medium (N1=721,N2=361,N3=621) Hybrid               -->
<!-- ********************************************************** -->
<benchmark name="medium_Hybrid" active="0">

    <compile     cname          = "$platform" 
                 version        = "new"
		 n1             = "$N1"
		 n2             = "$N2"
		 n3             = "$N3"/>

    <tasks       threadspertask = "2"
                 taskspernode   = "4"
                 nodes          = "45" />

    <params      descript       = "Setup: Medium Hybrid"
                 optflags       = "-openmp -r8 -O3 -axSSE4.1 -ipo -m64 -align rec8byte"
                 ldoptflags     = "-lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -liomp5"
                 N1             = "721"
                 N2             = "361"
                 N3             = "621"
                 NTST           = "10"
                 NSON           = "0"/>

    <prepare     cname          = "medium" />

    <execution   cname          = "$platform"
                 ppn            = "8"
		 omp            = "--exports=OMP_NUM_THREADS"
                 walltime       = "00:30:00"
                 iteration      = "1" />

    <verify      cname          = "standard" />

    <analyse     cname          = "standard" />

</benchmark>

<!-- ********************************************************** -->

<!-- ********************************************************** -->
<!-- Setup : Big (N1=1201,N2=513,N3=1025)  Hybrid               -->
<!-- ********************************************************** -->
<benchmark name="big_Hybrid" active="0">

    <compile     cname          = "$platform" 
                 version        = "new"
		 n1             = "$N1"
		 n2             = "$N2"
		 n3             = "$N3"/>

    <tasks       threadspertask = "2"
                 taskspernode   = "4"
                 nodes          = "64" />

    <params      descript       = "Setup: Big Hybrid"
                 optflags       = "-openmp -r8 -O3 -axSSE4.1 -ipo -m64 -align rec8byte"
                 ldoptflags     = "-lmkl_scalapack_lp64 -lmkl_blacs_intelmpi_lp64 -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -liomp5"
                 N1             = "1201"
                 N2             = "513"
                 N3             = "1025"
                 NTST           = "10"
                 NSON           = "0"/>

    <prepare     cname          = "big" />

    <execution   cname          = "$platform"
                 ppn            = "8"
		 omp            = "--exports=OMP_NUM_THREADS"
                 walltime       = "00:30:00"
                 iteration      = "1" />

    <verify      cname          = "standard" />

    <analyse     cname          = "standard" />

</benchmark>

<!-- ********************************************************** -->

</bench>
